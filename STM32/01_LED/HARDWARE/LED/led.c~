

#include "led.h"

/*******************************************************************************
* 	: RCC_Configuration
*   : ϵͳʱ
*   : 
*   : 
* ֵ    : 
* ˵			3.5汾ĿУѾҪԼʱˣ
							ֻsystem_stm32f10x.c ļ
							#define SYSCLK_FREQ_72MHz  72000000ʱӴС							
							ȻӦʱӼɡ
*******************************************************************************/

void RCC_Configuration(void)
{
	/* öͱ HSEStartUpStatus */
	ErrorStatus HSEStartUpStatus;

  	/* λϵͳʱ*/
  	RCC_DeInit();

  	/* HSE*/
  	RCC_HSEConfig(RCC_HSE_ON);

  	/* ȴHSEȶ*/
  	HSEStartUpStatus = RCC_WaitForHSEStartUp();
	
	/* жHSEǷɹif()ڲ */
  	if(HSEStartUpStatus == SUCCESS)
  	{
    	/* ѡHCLKAHBʱԴΪSYSCLK 1Ƶ */
    	RCC_HCLKConfig(RCC_SYSCLK_Div1); 
  
    	/* ѡPCLK2ʱԴΪ HCLKAHB 1Ƶ */
    	RCC_PCLK2Config(RCC_HCLK_Div1); 

    	/* ѡPCLK1ʱԴΪ HCLKAHB 2Ƶ */
    	RCC_PCLK1Config(RCC_HCLK_Div2);

    	/* FLASHʱΪ2 */
    	FLASH_SetLatency(FLASH_Latency_2);
    	/* ʹFLASHԤȡ */
    	FLASH_PrefetchBufferCmd(FLASH_PrefetchBuffer_Enable);

    	/* ѡ໷PLLʱԴΪHSE 1ƵƵΪ9PLLƵΪ 8MHz * 9 = 72MHz */
    	RCC_PLLConfig(RCC_PLLSource_HSE_Div1, RCC_PLLMul_9);

    	/* ʹPLL */ 
    	RCC_PLLCmd(ENABLE);

    	/* ȴPLLȶ */
    	while(RCC_GetFlagStatus(RCC_FLAG_PLLRDY) == RESET);

    	/* ѡSYSCLKʱԴΪPLL */
    	RCC_SYSCLKConfig(RCC_SYSCLKSource_PLLCLK);

    	/* ȴPLLΪSYSCLKʱԴ */
    	while(RCC_GetSYSCLKSource() != 0x08);
  	}
   
  	/* APB2ϵGPIOAʱ*/
  	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA , ENABLE);
}


/*******************************************************************************
*   		: GPIO_Configuration
*     	: øGPIO˿ڹ
*       : 
*       : 
* ֵ        : 
*******************************************************************************/

void GPIO_Configuration(void)
{
  	GPIO_InitTypeDef GPIO_InitStructure;
 
  	/* PA2,PA3ΪתƵΪ50MHz*/
  	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4|GPIO_Pin_5|GPIO_Pin_6;
  	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  	GPIO_Init(GPIOA , &GPIO_InitStructure);

    
}
